### Manual Test File for Debt Management API
### Use with REST Client extension in VS Code

@baseUrl = http://localhost:3000/api
@authToken = your-jwt-token-here
@householdId = your-household-id-here

### Create a Personal Debt
POST {{baseUrl}}/debts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "type": "PERSONAL",
  "name": "Loan from John",
  "creditor": "John Doe",
  "principalAmount": 1000,
  "currency": "IDR",
  "startDate": "2024-01-01"
}

### Create a Conventional Debt (Credit Card)
POST {{baseUrl}}/debts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "type": "CONVENTIONAL",
  "name": "Credit Card Debt",
  "creditor": "Bank ABC",
  "principalAmount": 5000,
  "currency": "IDR",
  "interestRate": 0.18,
  "startDate": "2024-01-01",
  "maturityDate": "2026-01-01"
}

### Create an Islamic Debt (Murabahah)
POST {{baseUrl}}/debts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "type": "ISLAMIC",
  "name": "Home Financing",
  "creditor": "Islamic Bank",
  "principalAmount": 100000,
  "currency": "IDR",
  "marginRate": 0.06,
  "startDate": "2024-01-01",
  "maturityDate": "2044-01-01"
}

### Get All Debts
GET {{baseUrl}}/debts
Authorization: Bearer {{authToken}}

### Get Debts by Type (Personal)
GET {{baseUrl}}/debts?type=PERSONAL
Authorization: Bearer {{authToken}}

### Get Active Debts Only
GET {{baseUrl}}/debts?isActive=true
Authorization: Bearer {{authToken}}

### Search Debts
GET {{baseUrl}}/debts?search=loan
Authorization: Bearer {{authToken}}

### Get Debt Summary
GET {{baseUrl}}/debts/summary
Authorization: Bearer {{authToken}}

### Get Specific Debt
GET {{baseUrl}}/debts/{{debtId}}
Authorization: Bearer {{authToken}}

### Get Payment Schedule
GET {{baseUrl}}/debts/{{debtId}}/schedule
Authorization: Bearer {{authToken}}

### Record a Payment
POST {{baseUrl}}/debts/{{debtId}}/payments
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "amount": 500,
  "paymentDate": "2024-02-01",
  "principalAmount": 450,
  "interestAmount": 50
}

### Update Debt
PUT {{baseUrl}}/debts/{{debtId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "Updated Debt Name",
  "creditor": "Updated Creditor"
}

### Deactivate Debt
PUT {{baseUrl}}/debts/{{debtId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "isActive": false
}

### Delete Debt
DELETE {{baseUrl}}/debts/{{debtId}}
Authorization: Bearer {{authToken}}

### Test Error Cases

### Try to create personal debt with interest rate (should fail)
POST {{baseUrl}}/debts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "type": "PERSONAL",
  "name": "Invalid Personal Loan",
  "creditor": "Someone",
  "principalAmount": 1000,
  "interestRate": 0.1,
  "startDate": "2024-01-01"
}

### Try to create conventional debt without interest rate (should fail)
POST {{baseUrl}}/debts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "type": "CONVENTIONAL",
  "name": "Invalid Credit Card",
  "creditor": "Bank",
  "principalAmount": 5000,
  "startDate": "2024-01-01"
}

### Try to create Islamic debt without margin rate (should fail)
POST {{baseUrl}}/debts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "type": "ISLAMIC",
  "name": "Invalid Murabahah",
  "creditor": "Islamic Bank",
  "principalAmount": 10000,
  "startDate": "2024-01-01"
}
