(()=>{var e={};e.id=720,e.ids=[720],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3338:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(28625);t(64996);var r=t(44714),i=t(37284);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return(0,a.jsx)("div",{className:(0,i.cn)(l({variant:s}),e),...t})}},8205:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(33922).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9790:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d});var a=t(5853),r=t(60554),i=t(30708),l=t.n(i),n=t(8067),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d={children:["",{children:["wishlist",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,69100)),"/Users/p/Project/v0-permoney/frontend/src/app/wishlist/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,25347)),"/Users/p/Project/v0-permoney/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,40417)),"/Users/p/Project/v0-permoney/frontend/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,48358,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/p/Project/v0-permoney/frontend/src/app/wishlist/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/wishlist/page",pathname:"/wishlist",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13350:(e,s,t)=>{"use strict";t.d(s,{SQ:()=>u,_2:()=>p,mB:()=>h,rI:()=>o,ty:()=>m});var a=t(28625),r=t(64996),i=t(53318),l=t(79114),n=t(32494),c=t(73940),d=t(37284);let o=i.bL,m=i.l9;i.YJ,i.ZL,i.Pb,i.z6,r.forwardRef(({className:e,inset:s,children:t,...r},n)=>(0,a.jsxs)(i.ZP,{ref:n,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...r,children:[t,(0,a.jsx)(l.A,{className:"ml-auto"})]})).displayName=i.ZP.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=i.G5.displayName;let u=r.forwardRef(({className:e,sideOffset:s=4,...t},r)=>(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{ref:r,sideOffset:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));u.displayName=i.UC.displayName;let p=r.forwardRef(({className:e,inset:s,...t},r)=>(0,a.jsx)(i.q7,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...t}));p.displayName=i.q7.displayName,r.forwardRef(({className:e,children:s,checked:t,...r},l)=>(0,a.jsxs)(i.H_,{ref:l,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),s]})).displayName=i.H_.displayName,r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.hN,{ref:r,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=i.hN.displayName,r.forwardRef(({className:e,inset:s,...t},r)=>(0,a.jsx)(i.JU,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t})).displayName=i.JU.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));h.displayName=i.wv.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20951:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>u,Es:()=>h,L3:()=>x,c7:()=>p,lG:()=>c,rr:()=>f,zM:()=>d});var a=t(28625),r=t(64996),i=t(15412),l=t(5818),n=t(37284);let c=i.bL,d=i.l9,o=i.ZL;i.bm;let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=i.hJ.displayName;let u=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(i.UC,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=i.UC.displayName;let p=({className:e,...s})=>(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});p.displayName="DialogHeader";let h=({className:e,...s})=>(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="DialogFooter";let x=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));x.displayName=i.hE.displayName;let f=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=i.VY.displayName},22779:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var a=t(28625),r=t(64996),i=t(37384),l=t(37284);let n=i.bL,c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.B8,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=i.B8.displayName;let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.l9,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=i.l9.displayName;let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.UC,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=i.UC.displayName},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32494:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(33922).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},33873:e=>{"use strict";e.exports=require("path")},36330:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(33922).A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},46918:(e,s,t)=>{Promise.resolve().then(t.bind(t,74560))},47887:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(33922).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},51936:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(33922).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},55166:(e,s,t)=>{Promise.resolve().then(t.bind(t,69100))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69100:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(20413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/p/Project/v0-permoney/frontend/src/app/wishlist/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/p/Project/v0-permoney/frontend/src/app/wishlist/page.tsx","default")},74560:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>es});var a=t(28625),r=t(64996),i=t(51936),l=t(11332),n=t(39718),c=t(8205),d=t(4715),o=t(29291),m=t(10565),u=t(22779),p=t(84717),h=t(48419),x=t(43261),f=t(83848);let g="/wishlist",y=(e,s)=>{let t=new URLSearchParams;s&&Object.entries(s).forEach(([e,s])=>{null!=s&&t.append(e,String(s))});let a=t.toString();return a?`${e}?${a}`:e},j={getWishlistItems:async()=>f.Ay.request(g),getWishlistItem:async e=>f.Ay.request(`${g}/${e}`),createWishlistItem:async e=>f.Ay.request(g,{method:"POST",body:JSON.stringify(e)}),updateWishlistItem:async(e,s)=>f.Ay.request(`${g}/${e}`,{method:"PUT",body:JSON.stringify(s)}),async deleteWishlistItem(e){await f.Ay.request(`${g}/${e}`,{method:"DELETE"})},refreshPrice:async e=>f.Ay.request(`${g}/${e}/refresh-price`,{method:"POST"}),getPriceHistory:async(e,s=30)=>f.Ay.request(y(`${g}/${e}/price-history`,{days:s})),getSavingsOpportunity:async e=>f.Ay.request(`${g}/${e}/savings-opportunity`),linkToGoal:async(e,s)=>f.Ay.request(`${g}/${e}/link-goal`,{method:"POST",body:JSON.stringify({goalId:s})}),unlinkFromGoal:async e=>f.Ay.request(`${g}/${e}/unlink-goal`,{method:"POST"}),markAsPurchased:async e=>f.Ay.request(`${g}/${e}/mark-purchased`,{method:"POST"}),getWishlistByGoal:async e=>f.Ay.request(`${g}/goal/${e}`)};var v=t(6228);let N=()=>(0,p.I)({queryKey:["wishlist"],queryFn:j.getWishlistItems}),b=()=>{let e=(0,h.jE)(),{toast:s}=(0,v.dj)();return(0,x.n)({mutationFn:j.createWishlistItem,onSuccess:t=>{e.invalidateQueries({queryKey:["wishlist"]}),s({title:"Success",description:`Added "${t.name}" to your wishlist`})},onError:e=>{s({title:"Error",description:e.message||"Failed to add item to wishlist",variant:"destructive"})}})},w=()=>{let e=(0,h.jE)(),{toast:s}=(0,v.dj)();return(0,x.n)({mutationFn:j.deleteWishlistItem,onSuccess:()=>{e.invalidateQueries({queryKey:["wishlist"]}),s({title:"Success",description:"Item removed from wishlist"})},onError:e=>{s({title:"Error",description:e.message||"Failed to remove item",variant:"destructive"})}})},P=()=>{let e=(0,h.jE)(),{toast:s}=(0,v.dj)();return(0,x.n)({mutationFn:j.refreshPrice,onSuccess:t=>{if(e.invalidateQueries({queryKey:["wishlist"]}),e.invalidateQueries({queryKey:["wishlist",t.item.id]}),t.priceAlert){let{priceAlert:e}=t;if(e.targetReached)s({title:"Success",description:`🎉 Target price reached for "${e.itemName}"!`});else if(Math.abs(e.priceChangePercent)>=10){let t=e.priceChange>0?"increased":"decreased";s({title:"Price Update",description:`Price ${t} by ${Math.abs(e.priceChangePercent).toFixed(1)}% for "${e.itemName}"`})}}s({title:"Success",description:"Price updated"})},onError:e=>{s({title:"Error",description:e.message||"Failed to refresh price",variant:"destructive"})}})},k=()=>{let e=(0,h.jE)(),{toast:s}=(0,v.dj)();return(0,x.n)({mutationFn:j.markAsPurchased,onSuccess:t=>{e.invalidateQueries({queryKey:["wishlist"]}),e.invalidateQueries({queryKey:["wishlist",t.id]}),s({title:"Success",description:`Marked "${t.name}" as purchased! 🎉`})},onError:e=>{s({title:"Error",description:e.message||"Failed to mark as purchased",variant:"destructive"})}})};var A=t(71367),C=t(33922);let $=(0,C.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var R=t(19084),S=t(84113),q=t(8837);let E=(0,C.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var _=t(51275),F=t(93683),T=t(36330),z=t(3338),I=t(13350),U=t(352),L=t(37284);function M({item:e}){let[s,t]=(0,r.useState)(!1),i=P(),l=k(),n=w(),o=async()=>{t(!0);try{await i.mutateAsync(e.id)}finally{t(!1)}},u=e.targetPrice&&e.currentPrice<=e.targetPrice,p=e.priceHistory.length>=2?e.currentPrice-e.priceHistory[1].price:0,h=e.priceHistory.length>=2&&e.priceHistory[1].price>0?(e.currentPrice-e.priceHistory[1].price)/e.priceHistory[1].price*100:0;return(0,a.jsxs)(m.Zp,{className:`relative transition-all hover:shadow-lg ${e.isPurchased?"opacity-75":""} ${u?"ring-2 ring-green-500":""}`,children:[u&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 z-10",children:(0,a.jsxs)(z.E,{className:"bg-green-500 text-white",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Target Reached!"]})}),(0,a.jsx)(m.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(U.eu,{className:"h-10 w-10",children:[(0,a.jsx)(U.BK,{src:e.imageUrl,alt:e.name}),(0,a.jsx)(U.q5,{children:e.name.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm truncate",title:e.name,children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.merchant})]})]}),(0,a.jsxs)(I.rI,{children:[(0,a.jsx)(I.ty,{asChild:!0,children:(0,a.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(I.SQ,{align:"end",children:[(0,a.jsxs)(I._2,{onClick:()=>window.open(e.url,"_blank"),children:[(0,a.jsx)($,{className:"h-4 w-4 mr-2"}),"View Product"]}),(0,a.jsxs)(I._2,{onClick:o,disabled:s,children:[(0,a.jsx)(R.A,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh Price"]}),(0,a.jsxs)(I._2,{children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Price History"]}),(0,a.jsxs)(I._2,{children:[(0,a.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Edit Item"]}),(0,a.jsx)(I.mB,{}),!e.isPurchased&&(0,a.jsxs)(I._2,{onClick:()=>{l.mutate(e.id)},children:[(0,a.jsx)(E,{className:"h-4 w-4 mr-2"}),"Mark as Purchased"]}),(0,a.jsxs)(I._2,{onClick:()=>{confirm(`Are you sure you want to remove "${e.name}" from your wishlist?`)&&n.mutate(e.id)},className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})]})}),(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-bold",children:(0,L.vv)(e.currentPrice,e.currency)}),0!==p&&(0,a.jsxs)("div",{className:`flex items-center space-x-1 text-sm ${p>0?"text-red-600":"text-green-600"}`,children:[p>0?(0,a.jsx)(F.A,{className:"h-4 w-4"}):(0,a.jsx)(T.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[Math.abs(h).toFixed(1),"%"]})]})]}),e.targetPrice&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Target:"}),(0,a.jsx)("span",{className:u?"text-green-600 font-semibold":"",children:(0,L.vv)(e.targetPrice,e.currency)})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.isPurchased&&(0,a.jsxs)(z.E,{variant:"secondary",children:[(0,a.jsx)(E,{className:"h-3 w-3 mr-1"}),"Purchased"]}),e.linkedGoalId&&(0,a.jsxs)(z.E,{variant:"outline",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Linked to Goal"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>window.open(e.url,"_blank"),className:"flex-1",children:[(0,a.jsx)($,{className:"h-4 w-4 mr-2"}),"View"]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:o,disabled:s,children:(0,a.jsx)(R.A,{className:`h-4 w-4 ${s?"animate-spin":""}`})})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Added ",(0,L.mo)(new Date(e.createdAt))," ago",e.createdBy&&` by ${e.createdBy.name}`]})]})]})}var V=t(3359),O=t(25144),W=t(63088),G=t(47887),H=t(33272),J=t(20951),B=t(81045),D=t(7909);let Z=W.Ik({name:W.Yj().min(1,"Product name is required"),url:W.Yj().url("Please enter a valid URL"),targetPrice:W.Yj().optional(),currency:W.Yj().default("IDR")}),K=[{name:"Tokopedia",domain:"tokopedia.com",color:"bg-green-500"},{name:"Shopee",domain:"shopee.co.id",color:"bg-orange-500"},{name:"Blibli",domain:"blibli.com",color:"bg-blue-500"},{name:"Lazada",domain:"lazada.co.id",color:"bg-purple-500"},{name:"Bukalapak",domain:"bukalapak.com",color:"bg-red-500"}];function Y({open:e,onOpenChange:s}){let[t,i]=(0,r.useState)(!1),[l,n]=(0,r.useState)(null),c=b(),{register:m,handleSubmit:u,formState:{errors:p},reset:h,watch:x,setValue:f}=(0,V.mN)({resolver:(0,O.u)(Z),defaultValues:{currency:"IDR"}}),g=x("url"),y=g?(e=>{try{let s=new URL(e).hostname.toLowerCase();return K.find(e=>s.includes(e.domain))}catch{return null}})(g):null,j=async e=>{n(null);let t={name:e.name,url:e.url,currency:e.currency,targetPrice:e.targetPrice?parseFloat(e.targetPrice):void 0};try{await c.mutateAsync(t),h(),s(!1)}catch(e){e.response?.status===400&&n(e.response.data.message)}},v=()=>{h(),n(null),s(!1)};return(0,a.jsx)(J.lG,{open:e,onOpenChange:v,children:(0,a.jsxs)(J.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(J.c7,{children:[(0,a.jsx)(J.L3,{children:"Add to Wishlist"}),(0,a.jsx)(J.rr,{children:"Add an item from a supported e-commerce site to track its price"})]}),(0,a.jsxs)("form",{onSubmit:u(j),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B.J,{htmlFor:"url",children:"Product URL"}),(0,a.jsx)(o.p,{id:"url",placeholder:"https://tokopedia.com/product/...",...m("url"),className:p.url?"border-red-500":""}),p.url&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:p.url.message}),l&&(0,a.jsxs)(D.Fc,{variant:"destructive",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)(D.TN,{children:l})]}),y&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z.E,{className:`${y.color} text-white`,children:y.name}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Supported merchant detected"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B.J,{htmlFor:"name",children:"Product Name"}),(0,a.jsx)(o.p,{id:"name",placeholder:"Enter product name",...m("name"),className:p.name?"border-red-500":""}),p.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:p.name.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B.J,{htmlFor:"targetPrice",children:"Target Price (Optional)"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o.p,{id:"targetPrice",type:"number",step:"0.01",placeholder:"0.00",...m("targetPrice"),className:"flex-1"}),(0,a.jsx)(o.p,{...m("currency"),className:"w-20",readOnly:!0})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when the price drops to or below this amount"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(B.J,{className:"text-sm font-medium",children:"Supported Merchants"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:K.map(e=>(0,a.jsx)(z.E,{variant:"outline",className:"text-xs",children:e.name},e.domain))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",disabled:c.isPending,className:"min-w-[100px]",children:c.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):"Add Item"})]})]})]})})}let Q=(0,C.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var X=t(41274);function ee({stats:e}){let s=[{title:"Total Items",value:e.total,icon:Q,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Active Tracking",value:e.active,icon:T.A,color:"text-green-600",bgColor:"bg-green-50"},{title:"Target Reached",value:e.targetReached,icon:c.A,color:"text-orange-600",bgColor:"bg-orange-50",highlight:e.targetReached>0},{title:"Total Value",value:(0,L.vv)(e.totalValue,"IDR"),icon:X.A,color:"text-purple-600",bgColor:"bg-purple-50",isValue:!0}];return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s.map((s,t)=>(0,a.jsxs)(m.Zp,{className:`relative ${s.highlight?"ring-2 ring-orange-200":""}`,children:[s.highlight&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,a.jsx)(z.E,{className:"bg-orange-500 text-white text-xs",children:"New!"})}),(0,a.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ZB,{className:"text-sm font-medium text-muted-foreground",children:s.title}),(0,a.jsx)("div",{className:`p-2 rounded-lg ${s.bgColor}`,children:(0,a.jsx)(s.icon,{className:`h-4 w-4 ${s.color}`})})]}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.isValue?s.value:s.value.toLocaleString()}),"Active Tracking"===s.title&&e.total>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.active/e.total*100).toFixed(0),"% of total items"]}),"Target Reached"===s.title&&e.active>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.targetReached/e.active*100).toFixed(0),"% of active items"]}),"Total Value"===s.title&&e.active>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.active," active items"]})]})]},t))})}function es(){let[e,s]=(0,r.useState)(""),[t,p]=(0,r.useState)(!1),[h,x]=(0,r.useState)("all"),{data:f=[],isLoading:g}=N(),y=f.filter(s=>{let t=s.name.toLowerCase().includes(e.toLowerCase())||s.merchant.toLowerCase().includes(e.toLowerCase());switch(h){case"active":return t&&!s.isPurchased;case"purchased":return t&&s.isPurchased;case"target-reached":return t&&!s.isPurchased&&s.targetPrice&&s.currentPrice<=s.targetPrice;default:return t}}),j={total:f.length,active:f.filter(e=>!e.isPurchased).length,purchased:f.filter(e=>e.isPurchased).length,targetReached:f.filter(e=>!e.isPurchased&&e.targetPrice&&e.currentPrice<=e.targetPrice).length,totalValue:f.filter(e=>!e.isPurchased).reduce((e,s)=>e+s.currentPrice,0)};return g?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-24 bg-gray-200 rounded"},s))}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"},s))})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Smart Wishlist"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track prices and get notified when your desired items go on sale"})]}),(0,a.jsxs)(d.$,{onClick:()=>p(!0),className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Add Item"]})]}),(0,a.jsx)(ee,{stats:j}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,a.jsx)(o.p,{placeholder:"Search items or merchants...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(d.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),"Filters"]})]}),(0,a.jsxs)(u.tU,{value:h,onValueChange:x,children:[(0,a.jsxs)(u.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(u.Xi,{value:"all",children:["All (",j.total,")"]}),(0,a.jsxs)(u.Xi,{value:"active",children:["Active (",j.active,")"]}),(0,a.jsxs)(u.Xi,{value:"target-reached",className:"text-green-600",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Target Reached (",j.targetReached,")"]}),(0,a.jsxs)(u.Xi,{value:"purchased",children:["Purchased (",j.purchased,")"]})]}),(0,a.jsx)(u.av,{value:h,className:"mt-6",children:0===y.length?(0,a.jsx)(m.Zp,{children:(0,a.jsx)(m.Wu,{className:"flex flex-col items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-6xl",children:"\uD83D\uDECD️"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e?"No items found":"Your wishlist is empty"}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-md",children:e?"Try adjusting your search terms or filters":"Start by adding items you want to track. We'll monitor prices and notify you of deals!"}),!e&&(0,a.jsxs)(d.$,{onClick:()=>p(!0),className:"mt-4",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Add Your First Item"]})]})})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(e=>(0,a.jsx)(M,{item:e},e.id))})})]}),(0,a.jsx)(Y,{open:t,onOpenChange:p})]})}},76965:(e,s,t)=>{"use strict";t.d(s,{jH:()=>i});var a=t(64996);t(28625);var r=a.createContext(void 0);function i(e){let s=a.useContext(r);return e||s||"ltr"}},81045:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var a=t(28625),r=t(64996),i=t(75498),l=t(44714),n=t(37284);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.b,{ref:t,className:(0,n.cn)(c(),e),...s}));d.displayName=i.b.displayName}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[625,303,336,251,19],()=>t(9790));module.exports=a})();